# Домашнее задание: Разворачиваем сетевую лабораторию

## Цель
Научиться менять базовые сетевые настройки в Linux-based системах.

## Описание/Пошаговая инструкция
Для выполнения домашнего задания используйте методичку.

## Что нужно сделать?
Используйте репозиторий:  
[otus-linux/Vagrantfile](https://github.com/erlong15/otus-linux/tree/network) (ветка `network`)

Файл `Vagrantfile` с начальным построением сети:
- inetRouter
- centralRouter
- centralServer

*Тестировалось на VirtualBox*

## Планируемая архитектура
Построить следующую архитектуру:

### Сеть office1
- `192.168.2.0/26` - dev
- `192.168.2.64/26` - test servers
- `192.168.2.128/26` - managers
- `192.168.2.192/26` - office hardware

### Сеть office2
- `192.168.1.0/25` - dev
- `192.168.1.128/26` - test servers
- `192.168.1.192/26` - office hardware

### Сеть central
- `192.168.0.0/28` - directors
- `192.168.0.32/28` - office hardware
- `192.168.0.64/26` - wifi



Office1 ---
-----> Central --IRouter --> internet
Office2----/




    
### Итоговые серверы
- inetRouter
- centralRouter
- office1Router
- office2Router
- centralServer
- office1Server
- office2Server

---

## Теоретическая часть

### 1. Найти свободные подсети
**Сеть office1 (192.168.2.0/24):**
- `192.168.2.0/26` (dev) - используется
- `192.168.2.64/26` (test servers) - используется
- `192.168.2.128/26` (managers) - используется
- `192.168.2.192/26` (office hardware) - используется  
**Свободных подсетей нет**

**Сеть office2 (192.168.1.0/24):**
- `192.168.1.0/25` (dev) - используется
- `192.168.1.128/26` (test servers) - используется
- `192.168.1.192/26` (office hardware) - используется  
**Свободных подсетей нет**

**Сеть central (192.168.0.0/24):**
- `192.168.0.0/28` (directors) - используется
- `192.168.0.32/28` (office hardware) - используется
- `192.168.0.64/26` (wifi) - используется  

**Свободные подсети:**
- `192.168.0.16/28`
- `192.168.0.48/28`
- `192.168.0.128/25`

### 2. Количество узлов в каждой подсети
Формула: `2^(32-префикс) - 2` (адрес сети и broadcast)

| Подсеть             | Узлов  |
|----------------------|--------|
| **Office1:**         |        |
| 192.168.2.0/26       | 62     |
| 192.168.2.64/26      | 62     |
| 192.168.2.128/26     | 62     |
| 192.168.2.192/26     | 62     |
| **Office2:**         |        |
| 192.168.1.0/25       | 126    |
| 192.168.1.128/26     | 62     |
| 192.168.1.192/26     | 62     |
| **Central:**         |        |
| 192.168.0.0/28       | 14     |
| 192.168.0.32/28      | 14     |
| 192.168.0.64/26      | 62     |
| **Свободные:**       |        |
| 192.168.0.16/28      | 14     |
| 192.168.0.48/28      | 14     |
| 192.168.0.128/25     | 126    |

### 3. Broadcast адреса
| Подсеть             | Broadcast      |
|----------------------|----------------|
| **Office1:**         |                |
| 192.168.2.0/26       | 192.168.2.63   |
| 192.168.2.64/26      | 192.168.2.127  |
| 192.168.2.128/26     | 192.168.2.191  |
| 192.168.2.192/26     | 192.168.2.255  |
| **Office2:**         |                |
| 192.168.1.0/25       | 192.168.1.127  |
| 192.168.1.128/26     | 192.168.1.191  |
| 192.168.1.192/26     | 192.168.1.255  |
| **Central:**         |                |
| 192.168.0.0/28       | 192.168.0.15   |
| 192.168.0.32/28      | 192.168.0.47   |
| 192.168.0.64/26      | 192.168.0.127  |
| **Свободные:**       |                |
| 192.168.0.16/28      | 192.168.0.31   |
| 192.168.0.48/28      | 192.168.0.63   |
| 192.168.0.128/25     | 192.168.0.255  |

---

## Практическая часть
1. Соединить офисы в сеть согласно схеме и настроить роутинг
2. Все сервера и роутеры должны ходить в интернет через inetRouter
3. Все сервера должны видеть друг друга
4. У всех новых серверов отключить дефолт на NAT (eth0), который Vagrant поднимает для связи
5. При нехватке сетевых интерфейсов добавить по несколько адресов на интерфейс

**Формат сдачи ДЗ:** vagrant + ansible
